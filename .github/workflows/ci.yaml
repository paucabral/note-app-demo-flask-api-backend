name: CI Workflow

on:
  push:
    branches-ignore:
      - 'docs/**'

jobs:
  run-linter:
    uses: ./.github/workflows/actions/linter.yaml

  run-tests:
    uses: ./.github/workflows/actions/tests.yaml
    with:
      environment: testing

  build-image:
    needs: [run-linter,run-tests]
    uses: ./.github/workflows/actions/build.yaml

  publish-image:
    needs: build-image
    uses: ./.github/workflows/actions/publish.yaml